<!DOCTYPE html>
<html lang="es">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>StellarBooks</title>
        
        <!-- Bootstrap CSS -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        
        <!-- Bootstrap Icons -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
        
        <!-- Custom CSS -->
        <link rel="stylesheet" href="css/site.css">
    </head>
    <body>
        <!-- Header -->
        <header class="header-bg">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <h1 class="display-5 fw-bold mb-0">
                            <i class="bi bi-book-half"></i> StellarBooks
                        </h1>
                        <p class="lead mb-0">Biblioteca de Cuentos Infantiles</p>
                    </div>
                    <div class="col-md-4 text-end">
                        <span id="currentDate" class="text-white-50"></span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Navigation -->
        <div class="container mt-4">
            <ul class="nav nav-tabs" id="mainTabs" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="tales-tab" data-bs-toggle="tab" data-bs-target="#tales" type="button" role="tab">
                        <i class="bi bi-book"></i> Cuentos
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="activities-tab" data-bs-toggle="tab" data-bs-target="#activities" type="button" role="tab">
                        <i class="bi bi-puzzle"></i> Actividades
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="favorites-tab" data-bs-toggle="tab" data-bs-target="#favorites" type="button" role="tab">
                        <i class="bi bi-heart"></i> Favoritos
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="users-tab" data-bs-toggle="tab" data-bs-target="#users" type="button" role="tab">
                        <i class="bi bi-people"></i> Usuarios
                    </button>
                </li>
            </ul>
        </div>

        <div class="container mt-4">

            <!-- Tab Content -->
            <div class="tab-content" id="mainTabsContent">

                <!-- Tales Tab -->
                <div class="tab-pane fade show active" id="tales" role="tabpanel" aria-labelledby="tales-tab">
                    <div class="card">

                        <!-- Header -->
                        <div class="card-header d-flex justify-content-between align-items-center flex-wrap">
                            <h5 class="mb-0 d-flex align-items-center">
                                <i class="bi bi-book me-2" aria-hidden="true"></i>
                                Gestión de Cuentos
                                <span class="badge bg-light text-dark ms-2" id="talesCount" aria-label="Cantidad de cuentos">0</span>
                            </h5>
                            <button type="button" class="btn btn-success btn-custom" id="addTaleBtn" aria-label="Crear nuevo cuento">
                                <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Nuevo Cuento
                            </button>
                        </div>

                        <div class="card-body">
                            <!-- Filters Section -->
                            <form class="filters-section mb-4" id="taleFiltersForm" aria-label="Filtros de cuentos" onsubmit="return false;">
                                <div class="row g-3">

                                    <!-- Category Filter -->
                                    <div class="col-md-2">
                                        <label for="taleCategoryFilter" class="form-label visually-hidden">Filtrar por categoría</label>
                                        <select class="form-select" id="taleCategoryFilter" aria-label="Filtrar por categoría">
                                            <option value="">Todas las categorías</option>
                                            <option value="Fantasía">Fantasía</option>
                                            <option value="Aventura">Aventura</option>
                                            <option value="Educativo">Educativo</option>
                                            <option value="Comedia">Comedia</option>
                                        </select>
                                    </div>

                                    <!-- Status Filter -->
                                    <div class="col-md-2">
                                        <label for="taleStatusFilter" class="form-label visually-hidden">Filtrar por estado</label>
                                            <select class="form-select" id="taleStatusFilter" aria-label="Filtrar por estado">
                                            <option value="">Todos los estados</option>
                                            <option value="true">Disponibles</option>
                                            <option value="false">No disponibles</option>
                                        </select>
                                    </div>

                                    <!-- Age Range Filter -->
                                    <div class="col-md-2">
                                        <label for="taleAgeFilter" class="form-label visually-hidden">Filtrar por rango de edad</label>
                                            <select class="form-select" id="taleAgeFilter" aria-label="Filtrar por rango de edad">
                                            <option value="">Todas las edades</option>
                                            <option value="1-3">1-3 años</option>
                                            <option value="4-6">4-6 años</option>
                                            <option value="7-9">7-9 años</option>
                                            <option value="10-12">10-12 años</option>
                                        </select>
                                    </div>

                                    <!-- Sort Options -->
                                    <div class="col-md-2">
                                        <label for="taleSortBy" class="form-label visually-hidden">Ordenar por</label>
                                        <select class="form-select" id="taleSortBy" aria-label="Ordenar por">
                                            <option value="title">Título (A-Z)</option>
                                            <option value="title_desc">Título (Z-A)</option>
                                            <option value="date_created_desc">Más recientes</option>
                                            <option value="date_created">Más antiguos</option>
                                        </select>
                                    </div>

                                    <!-- Clear Filters Button -->
                                    <div class="col-md-2">
                                        <button type="button" class="btn btn-outline-secondary w-100" id="clearTaleFilters" aria-label="Limpiar filtros de cuentos">
                                            <i class="bi bi-x-circle me-1" aria-hidden="true"></i> Limpiar
                                        </button>
                                    </div>
                                </div>
                            </form>

                            <!-- Status / Feedback -->
                            <div id="talesStatus" role="status" aria-live="polite" class="mb-3 visually-hidden">
                                <!-- Mensajes dinámicos: cargando, sin resultados, error, etc. -->
                            </div>

                            <!-- Tales Grid -->
                            <div id="talesGrid" class="row g-4" role="region" aria-label="Lista de cuentos">
                                <!-- Cuentos cargados dinámicamente -->
                            </div>

                            <!-- Empty State -->
                            <div class="empty-state text-center d-none" id="emptyState" aria-label="Estado vacío de cuentos">
                                <i class="bi bi-book fs-1 mb-2" aria-hidden="true"></i>
                                <h4>No se encontraron cuentos</h4>
                                <p>No hay cuentos que coincidan con los filtros seleccionados.</p>
                                <button class="btn btn-primary" id="createFirstTale" aria-label="Crear primer cuento">
                                <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Crear cuento
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Activities Tab -->
                <div class="tab-pane fade" id="activities" role="tabpanel" aria-labelledby="activities-tab">
                    <div class="card">
                        
                        <!-- Header -->
                        <div class="card-header d-flex justify-content-between align-items-center flex-wrap">
                            <h5 class="mb-0 d-flex align-items-center">
                                <i class="bi bi-puzzle me-2" aria-hidden="true"></i> Gestión de Actividades
                                <span class="badge bg-light text-dark ms-2" id="activitiesCount" aria-label="Cantidad de actividades">0</span>
                            </h5>
                            <button type="button" class="btn btn-success btn-custom" id="addActivityBtn" aria-label="Crear nueva actividad">
                                <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Nueva Actividad
                            </button>
                        </div>

                        <div class="card-body">
                            <!-- Filters -->
                            <form class="row gy-2 mb-4" id="activityFiltersForm" aria-label="Filtros de actividades" onsubmit="return false;">
                                
                                <!-- Activity Type Filter -->
                                <div class="col-md-2">
                                    <label for="activityTypeFilter" class="form-label visually-hidden">Filtrar por tipo de actividad</label>
                                    <select class="form-select" id="activityTypeFilter" aria-label="Filtrar por tipo de actividad">
                                        <option value="">Todos los tipos</option>
                                        <option value="DotToDot">DotToDot</option>
                                        <option value="Drawing">Drawing</option>
                                        <option value="Quiz">Quiz</option>
                                    </select>
                                </div>

                                <!-- Sort Options -->
                                <div class="col-md-2">
                                    <label for="activitySortBy" class="form-label visually-hidden">Ordenar por</label>
                                    <select class="form-select" id="activitySortBy" aria-label="Ordenar por">
                                        <option value="title">Título (A-Z)</option>
                                        <option value="title_desc">Título (Z-A)</option>
                                        <option value="date_created_desc">Más recientes</option>
                                        <option value="date_created">Más antiguos</option>
                                    </select>
                                </div>

                                <!-- Clear Filters Button -->
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-outline-secondary w-100" id="clearActivityFilters" aria-label="Limpiar filtros de actividades">
                                        <i class="bi bi-x-circle me-1" aria-hidden="true"></i> Limpiar
                                    </button>
                                </div>
                            </form>

                            <!-- Feedback -->
                            <div id="activitiesStatus" role="status" aria-live="polite" class="mb-3 visually-hidden">
                                <!-- Cargando / sin resultados / error -->
                            </div>

                            <!-- Activities Table -->
                            <div class="table-responsive">
                                <table class="table table-striped table-hover" aria-describedby="activitiesStatus">
                                    <caption class="visually-hidden">Lista de actividades</caption>
                                    <thead class="table-dark">
                                        <tr>
                                            <th scope="col">ID</th>
                                            <th scope="col">Cuento</th>
                                            <th scope="col">Tipo</th>
                                            <th scope="col">Descripción</th>
                                            <th scope="col">Multimedia</th>
                                            <th scope="col">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="activitiesTableBody">
                                        <!-- Filas generadas dinámicamente -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Empty State -->
                            <div class="empty-state text-center d-none" id="emptyActivitiesState" aria-label="Sin actividades">
                                <i class="bi bi-puzzle fs-1 mb-2" aria-hidden="true"></i>
                                <h4>No se encontraron actividades</h4>
                                <p>Ajusta los filtros o crea una nueva actividad.</p>
                                <button class="btn btn-primary" id="createFirstActivity" aria-label="Crear primera actividad">
                                    <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Crear actividad
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Favorites Tab -->
                <div class="tab-pane fade" id="favorites" role="tabpanel" aria-labelledby="favorites-tab">
                    <div class="card">
                        <!-- Header -->
                        <div class="card-header d-flex justify-content-between align-items-center flex-wrap">
                            <h5 class="mb-0 d-flex align-items-center">
                                <i class="bi bi-heart me-2" aria-hidden="true"></i> Gestión de Favoritos
                                <span class="badge bg-light text-dark ms-2" id="favoritesCount" aria-label="Cantidad de favoritos">0</span>
                            </h5>
                            <button type="button" class="btn btn-success btn-custom" id="addFavoriteBtn" aria-label="Agregar nuevo favorito">
                                <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Nuevo Favorito
                            </button>
                        </div>

                        <div class="card-body">
                            <!-- Filters -->
                            <form class="row gy-2 mb-4" id="favoriteFiltersForm" aria-label="Filtros de favoritos" onsubmit="return false;">

                                <!-- User Filter -->
                                <div class="col-md-2">
                                    <label for="favoriteUserFilter" class="form-label visually-hidden">Filtrar por usuario</label>
                                    <select class="form-select" id="favoriteUserFilter" aria-label="Filtrar por usuario">
                                        <option value="">Todos los usuarios</option>
                                        <!-- Opciones cargadas dinámicamente -->
                                    </select>
                                </div>

                                <!-- Tale Filter -->
                                <div class="col-md-2">
                                    <label for="favoriteTaleFilter" class="form-label visually-hidden">Filtrar por cuento</label>
                                    <select class="form-select" id="favoriteTaleFilter" aria-label="Filtrar por cuento">
                                        <option value="">Todos los cuentos</option>
                                        <!-- Opciones cargadas dinámicamente -->
                                    </select>
                                </div>

                                <!-- Date Filter -->
                                <div class="col-md-2">
                                    <label for="favoriteDate" class="form-label visually-hidden">Filtrar por fecha</label>
                                    <input type="date" class="form-control" id="favoriteDate" aria-label="Filtrar por fecha">
                                </div>

                                <!-- Sort Options -->
                                <div class="col-md-2">
                                    <label for="favoriteSortBy" class="form-label visually-hidden">Ordenar por</label>
                                    <select class="form-select" id="favoriteSortBy" aria-label="Ordenar por">
                                        <option value="id">ID (Ascendente)</option>
                                        <option value="id_desc">ID (Descendente)</option>
                                        <option value="dateAdded_desc">Fecha más reciente</option>
                                        <option value="dateAdded">Fecha más antigua</option>
                                    </select>
                                </div>

                                <!-- Clear Filters Button -->
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-outline-secondary w-100" id="clearFavoriteFilters" aria-label="Limpiar filtros de favoritos">
                                        <i class="bi bi-x-circle me-1" aria-hidden="true"></i> Limpiar
                                    </button>
                                </div>
                            </form>

                            <!-- Feedback -->
                            <div id="favoritesStatus" role="status" aria-live="polite" class="mb-3 visually-hidden">
                                <!-- Cargando / sin resultados / error -->
                            </div>

                            <!-- Favorites Table -->
                            <div class="table-responsive">
                                <table class="table table-striped table-hover" aria-describedby="favoritesStatus">
                                    <caption class="visually-hidden">Lista de favoritos</caption>
                                    <thead class="table-dark">
                                        <tr>
                                        <th scope="col">ID</th>
                                            <th scope="col">Usuario</th>
                                            <th scope="col">Cuento</th>
                                            <th scope="col">Fecha Agregado</th>
                                            <th scope="col">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="favoritesTableBody">
                                        <!-- Filas generadas dinámicamente -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Empty State -->
                            <div class="empty-state text-center d-none" id="emptyFavoritesState" aria-label="Sin favoritos">
                                <i class="bi bi-heart fs-1 mb-2" aria-hidden="true"></i>
                                <h4>No se encontraron favoritos</h4>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Users Tab -->
                <div class="tab-pane fade" id="users" role="tabpanel" aria-labelledby="users-tab">
                    <div class="card">
                        <!-- Header -->
                        <div class="card-header d-flex justify-content-between align-items-center flex-wrap">
                            <h5 class="mb-0 d-flex align-items-center">
                                <i class="bi bi-people me-2" aria-hidden="true"></i> Gestión de Usuarios
                                <span class="badge bg-light text-dark ms-2" id="usersCount" aria-label="Cantidad de usuarios">0</span>
                            </h5>
                            <button type="button" class="btn btn-success btn-custom" id="addUserBtn" aria-label="Crear nuevo usuario">
                                <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Nuevo Usuario
                            </button>
                        </div>

                        <div class="card-body">
                            <!-- Filters -->
                            <form class="row gy-2 mb-4" id="userFiltersForm" aria-label="Filtros de usuarios" onsubmit="return false;">

                                <!-- User Type Filter -->
                                <div class="col-md-2">
                                    <label for="userTypeFilter" class="form-label visually-hidden">Filtrar por tipo de usuario</label>
                                    <select class="form-select" id="userTypeFilter" aria-label="Filtrar por tipo de usuario">
                                        <option value="">Todos los tipos</option>
                                        <option value="Reader">Lector</option>
                                        <option value="Admin">Administrador</option>
                                    </select>
                                </div>

                                <!-- Status Filter -->  
                                <div class="col-md-2">
                                    <label for="userStatusFilter" class="form-label visually-hidden">Filtrar por estado</label>
                                    <select class="form-select" id="userStatusFilter" aria-label="Filtrar por estado">
                                        <option value="">Todos los estados</option>
                                        <option value="true">Activos</option>
                                        <option value="false">Inactivos</option>
                                    </select>
                                </div>

                                <!-- Registration Date -->
                                <div class="col-md-2">
                                    <label for="userDate" class="form-label visually-hidden">Registrado en</label>
                                    <input type="date" class="form-control" id="userDate" aria-label="Registrado en">
                                </div>

                                <!-- Ordenar Usuarios -->
                                <div class="col-md-2">
                                    <label for="userSortBy" class="form-label visually-hidden">Ordenar por</label>
                                    <select class="form-select" id="userSortBy" aria-label="Ordenar por">
                                        <option value="name">Nombre (A-Z)</option>
                                        <option value="name_desc">Nombre (Z-A)</option>
                                        <option value="id">ID (Ascendente)</option>
                                        <option value="id_desc">ID (Descendente)</option>
                                        <option value="registrationDate_desc">Fecha registro más reciente</option>
                                        <option value="registrationDate">Fecha registro más antiguo</option>
                                    </select>
                                </div>

                                <!-- Clear Filters Button -->
                                <div class="col-md-2">
                                    <button type="button" class="btn btn-outline-secondary w-100" id="clearUserFilters" aria-label="Limpiar filtros de usuarios">
                                        <i class="bi bi-x-circle me-1" aria-hidden="true"></i> Limpiar
                                    </button>
                                </div>
                            </form>

                            <!-- Feedback -->
                            <div id="usersStatus" role="status" aria-live="polite" class="mb-3 visually-hidden">
                                <!-- Cargando / sin resultados / error -->
                            </div>

                            <!-- Users Table -->
                            <div class="table-responsive">
                                <table class="table table-striped table-hover" aria-describedby="usersStatus">
                                    <caption class="visually-hidden">Lista de usuarios</caption>
                                    <thead class="table-dark">
                                        <tr>
                                            <th scope="col">ID</th>
                                            <th scope="col">Nombre</th>
                                            <th scope="col">Apellido</th>
                                            <th scope="col">Email</th>
                                            <th scope="col">Tipo</th>
                                            <th scope="col">Fecha Registro</th>
                                            <th scope="col">Estado</th>
                                            <th scope="col">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody id="usersTableBody">
                                        <!-- Filas generadas dinámicamente -->
                                    </tbody>
                                </table>
                            </div>

                            <!-- Empty State -->
                            <div class="empty-state text-center d-none" id="emptyUsersState" aria-label="Sin usuarios">
                                <i class="bi bi-people fs-1 mb-2" aria-hidden="true"></i>
                                <h4>No se encontraron usuarios</h4>
                                <p>Ajusta los filtros o crea un nuevo usuario.</p>
                                <button class="btn btn-primary" id="createFirstUser" aria-label="Crear primer usuario">
                                    <i class="bi bi-plus-circle me-1" aria-hidden="true"></i> Crear usuario
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Modals -->

        <!-- Tale Modal -->
        <div class="modal fade" id="taleModal" tabindex="-1" aria-labelledby="taleModalTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title d-flex align-items-center" id="taleModalTitle">
                            <i class="bi bi-book me-2"></i> <span id="taleModalAction">Nuevo Cuento</span>
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>

                    <div class="modal-body">
                        <form id="taleForm" novalidate>
                            <input type="hidden" id="taleId">

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="taleTitle" class="form-label">Título *</label>
                                    <input type="text" class="form-control" id="taleTitle" required aria-required="true">
                                </div>

                                <div class="col-md-6">
                                    <label for="taleRecommendedAge" class="form-label">Edad Recomendada *</label>
                                    <input type="number" min="0" class="form-control" id="taleRecommendedAge" required aria-required="true">
                                </div>

                                <div class="col-md-6">
                                    <label for="taleTheme" class="form-label">Tema *</label>
                                    <input type="text" class="form-control" id="taleTheme" required aria-required="true">
                                </div>

                                <div class="col-md-6">
                                    <label for="talePublicationDate" class="form-label">Fecha de Publicación</label>
                                    <input type="date" class="form-control" id="talePublicationDate" aria-label="Fecha de publicación del cuento">
                                </div>

                                <div class="col-12">
                                    <label for="taleContent" class="form-label">Contenido *</label>
                                    <textarea class="form-control" id="taleContent" rows="6" required aria-required="true"></textarea>
                                </div>

                                <div class="col-md-6">
                                    <label for="taleCoverImage" class="form-label">Imagen de Portada (URL) *</label>
                                    <input type="text" class="form-control" id="taleCoverImage" placeholder="Ej: https://.../imagen.jpg" aria-label="URL de la imagen de portada">
                                </div>

                                <div class="col-md-6">
                                    <label for="taleNarrationAudio" class="form-label">Audio de Narración (URL) *</label>
                                    <input type="text" class="form-control" id="taleNarrationAudio" placeholder="Ej: https://.../audio.mp3" aria-label="URL del audio de narración">
                                </div>

                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="taleIsAvailable" checked>
                                        <label class="form-check-label" for="taleIsAvailable">
                                            Disponible
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="saveTaleBtn" aria-label="Guardar cuento">
                            <i class="bi bi-check-circle me-1"></i> Guardar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Activity Modal -->
        <div class="modal fade" id="activityModal" tabindex="-1" aria-labelledby="activityModalTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title d-flex align-items-center" id="activityModalTitle">
                            <i class="bi bi-puzzle me-2"></i> <span id="activityModalAction">Nueva Actividad</span>
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>

                    <div class="modal-body">
                        <form id="activityForm" novalidate>
                            <input type="hidden" id="activityId">

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="activityStoryId" class="form-label">Cuento *</label>
                                    <select class="form-select" id="activityStoryId" required aria-required="true">
                                        <option value="">Seleccionar cuento...</option>
                                        <!-- Opciones cargadas dinámicamente -->
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label for="activityType" class="form-label">Tipo de Actividad *</label>
                                    <select class="form-select" id="activityType" required aria-required="true">
                                        <option value="">Seleccionar tipo...</option>
                                        <option value="DotToDot">DotToDot</option>
                                        <option value="Drawing">Drawing</option>
                                        <option value="Quiz">Quiz</option>
                                    </select>
                                </div>

                                <div class="col-12">
                                    <label for="activityDescription" class="form-label">Descripción *</label>
                                    <textarea class="form-control" id="activityDescription" rows="4" required aria-required="true" placeholder="Describe la actividad..."></textarea>
                                </div>

                                <div class="col-12">
                                    <label for="activityMultimediaUrl" class="form-label">URL de Multimedia *</label>
                                    <input type="url" class="form-control" id="activityMultimediaUrl" placeholder="Ej: https://.../archivo.jpg" aria-label="URL del archivo multimedia">
                                    <div class="form-text">Ingresa la URL de una imagen, audio o video relacionado con la actividad.</div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="saveActivityBtn" aria-label="Guardar actividad">
                            <i class="bi bi-check-circle me-1"></i> Guardar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Favorite Modal -->
        <div class="modal fade" id="favoriteModal" tabindex="-1" aria-labelledby="favoriteModalTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title d-flex align-items-center" id="favoriteModalTitle">
                            <i class="bi bi-heart me-2"></i> <span id="favoriteModalAction">Nuevo Favorito</span>
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>

                    <div class="modal-body">
                        <form id="favoriteForm" novalidate>
                            <input type="hidden" id="favoriteId">

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="favoriteUserId" class="form-label">Usuario *</label>
                                    <select class="form-select" id="favoriteUserId" required aria-required="true">
                                        <option value="">Seleccionar usuario...</option>
                                        <!-- Opciones cargadas dinámicamente -->
                                    </select>
                                </div>

                                <div class="col-md-6">
                                    <label for="favoriteTaleId" class="form-label">Cuento *</label>
                                    <select class="form-select" id="favoriteTaleId" required aria-required="true">
                                        <option value="">Seleccionar cuento...</option>
                                        <!-- Opciones cargadas dinámicamente -->
                                    </select>
                                </div>

                                <div class="col-12">
                                    <label for="favoriteDateAdded" class="form-label">Fecha de Agregado</label>
                                    <input type="date" class="form-control" id="favoriteDateAdded" aria-label="Fecha en que se agregó a favoritos">
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="saveFavoriteBtn" aria-label="Guardar favorito">
                            <i class="bi bi-check-circle me-1"></i> Guardar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- User Modal -->
        <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalTitle" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title d-flex align-items-center" id="userModalTitle">
                            <i class="bi bi-person me-2"></i> <span id="userModalAction">Nuevo Usuario</span>
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Cerrar"></button>
                    </div>

                    <div class="modal-body">
                        <form id="userForm" novalidate>
                            <input type="hidden" id="userId">

                            <div class="row g-3">
                                <div class="col-md-6">
                                    <label for="userFirstName" class="form-label">Nombre *</label>
                                    <input type="text" class="form-control" id="userFirstName" required aria-required="true" maxlength="50">
                                </div>

                                <div class="col-md-6">
                                    <label for="userLastName" class="form-label">Apellido *</label>
                                    <input type="text" class="form-control" id="userLastName" required aria-required="true" maxlength="50">
                                </div>

                                <div class="col-md-6">
                                    <label for="userEmail" class="form-label">Email *</label>
                                    <input type="email" class="form-control" id="userEmail" required aria-required="true" maxlength="100">
                                </div>

                                <div class="col-md-6">
                                    <label for="userType" class="form-label">Tipo de Usuario *</label>
                                    <select class="form-select" id="userType" required aria-required="true">
                                        <option value="">Seleccionar tipo...</option>
                                        <option value="Reader">Lector</option>
                                        <option value="Admin">Administrador</option>
                                    </select>
                                </div>

                                <div class="col-md-6" id="passwordSection">
                                    <label for="userPassword" class="form-label">Contraseña *</label>
                                    <input type="password" class="form-control" id="userPassword" required aria-required="true" maxlength="255">
                                </div>

                                <div class="col-md-6">
                                    <label for="userRegistrationDate" class="form-label">Fecha de Registro</label>
                                    <input type="date" class="form-control" id="userRegistrationDate" aria-label="Fecha de registro del usuario">
                                </div>

                                <div class="col-12">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="userIsActive" checked>
                                        <label class="form-check-label" for="userIsActive">
                                            Usuario Activo
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>

                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                        <button type="button" class="btn btn-primary" id="saveUserBtn" aria-label="Guardar usuario">
                            <i class="bi bi-check-circle me-1"></i> Guardar
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="js/app.js"></script>
    </body>
</html>